{% extends "pages/base.html" %}
{% block subtitulo %}Seu Curso{% endblock %}
{% block conteudo %}
<style>
    /* Estilos para o bot√£o */
    #lamp-button {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        background-color: transparent;
        border: none;
        cursor: pointer;
        font-size: 24px;
        color: #333;
    }

    /* Estilo para o overlay que escurece o background */
    #overlay {
        opacity: 0;
        transition: opacity 0.3s ease; /* Transi√ß√£o suave de opacidade */
        pointer-events: none; /* Garante que o overlay n√£o seja clic√°vel quando invis√≠vel */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9); /* Cor escura com transpar√™ncia */
        z-index: 999;
    }

    /* Estilo para mostrar o overlay quando vis√≠vel */
    #overlay.active {
        opacity: 1;
        pointer-events: auto; /* Torna o overlay clic√°vel quando vis√≠vel */
    }

    /* Estilo para o container do v√≠deo */
    .video-container {
        position: relative;
        width: 100%;
        padding-bottom: 56.25%; /* Propor√ß√£o 16:9 para v√≠deos responsivos */
        z-index: 1001; /* Garante que o v√≠deo esteja sempre acima do overlay */
    }

    /* Estilo para o v√≠deo dentro do container */
    .video-container iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
</style>

<!-- Bot√£o de l√¢mpada -->
<button id="lamp-button">üí°</button>

<!-- Div para escurecer o background -->
<div id="overlay"></div>

<!-- Container do v√≠deo -->
<div class="video-container" style="margin-bottom: 40px;">
    <iframe id="curso-video"
            src="{{ curso.url }}" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
            allowfullscreen></iframe>
</div>

<script>
    // Script para controlar o bot√£o de l√¢mpada e o overlay
    document.addEventListener("DOMContentLoaded", function() {
        var lampButton = document.getElementById("lamp-button");
        var overlay = document.getElementById("overlay");

        lampButton.addEventListener("click", function() {
            if (overlay.classList.contains("active")) {
                overlay.classList.remove("active");
                lampButton.textContent = "üí°"; // Texto original do bot√£o
                lampButton.style.color = "#333"; // Restaura a cor original do texto do bot√£o
            } else {
                overlay.classList.add("active");
                lampButton.textContent = "üí°"; // Altera o texto do bot√£o ao escurecer
                lampButton.style.color = "#fff"; // Altera a cor do texto do bot√£o ao escurecer
            }
        });

        // Captura de cliques no overlay para evitar que cliques passem para o v√≠deo
        overlay.addEventListener("click", function(event) {
            event.stopPropagation(); // Impede a propaga√ß√£o do evento para o v√≠deo
        });

        // Captura de cliques no v√≠deo para garantir interatividade mesmo com overlay vis√≠vel
        var video = document.getElementById("curso-video");
        video.addEventListener("click", function(event) {
            event.stopPropagation(); // Impede a propaga√ß√£o do evento para o overlay
            // Aqui voc√™ pode adicionar l√≥gica para pausar/play no v√≠deo, por exemplo:
            if (video.paused) {
                video.play();
            } else {
                video.pause();
            }
        });
    });
</script>

{% endblock %}
